import{a as w,b as y,c as P,d as v,e as L,f as O,g as x,h as S,i as E,j as k}from"./chunk-2K6HCOYW.js";import{i as _,j as C}from"./chunk-PKJX3TX3.js";import{$a as u,Ka as s,La as n,Ma as o,Na as g,Qa as b,Xa as i,Ya as M,Za as m,_a as c,oa as a,va as d,za as h}from"./chunk-BG3YE536.js";var F=class p{constructor(l,e){this.router=l;this.authService=e}email="";password="";errorMessage="";isLoading=!1;onLogin(){if(console.log("\u{1F535} onLogin iniciado"),!this.email||!this.password){this.errorMessage="Por favor completa todos los campos";return}this.isLoading=!0,this.errorMessage="";let l={email:this.email,password:this.password};console.log("\u{1F680} Enviando credenciales:",{email:this.email}),this.authService.login(l).subscribe({next:e=>{console.log("\u2705 Login exitoso:",e),this.authService.saveToken(e.access_token),console.log("\u{1F511} Token guardado, redirigiendo..."),this.router.navigate(["/app/home"])},error:e=>{console.error("\u274C Error en login:",e),e.status===401||e.status===422?this.errorMessage="Correo o contrase\xF1a incorrectos":e.status===404?this.errorMessage="Usuario no encontrado":e.status===0?this.errorMessage="Error de conexi\xF3n. Verifica tu internet":this.errorMessage="Error al iniciar sesi\xF3n. Intenta de nuevo",this.isLoading=!1,console.log("\u274C isLoading establecido en false"),console.log("\u274C Mensaje de error:",this.errorMessage)}})}static \u0275fac=function(e){return new(e||p)(d(_),d(k))};static \u0275cmp=h({type:p,selectors:[["app-login"]],decls:24,vars:9,consts:[[1,"auth-container"],[1,"auth-card"],[1,"logo-container"],["src","assets/img/logo2.png","alt","Booksmart Logo",1,"logo"],[3,"message","type","show"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","tu@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary",3,"disabled"],[1,"auth-link"],["routerLink","/register"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),g(3,"img",3),o(),n(4,"h1"),i(5,"Booksmart"),o(),n(6,"h2"),i(7,"Iniciar Sesi\xF3n"),o(),g(8,"app-alert",4),n(9,"form",5),b("ngSubmit",function(){return t.onLogin()}),n(10,"div",6)(11,"label",7),i(12,"Correo Electr\xF3nico"),o(),n(13,"input",8),u("ngModelChange",function(r){return c(t.email,r)||(t.email=r),r}),o()(),n(14,"div",6)(15,"label",9),i(16,"Contrase\xF1a"),o(),n(17,"input",10),u("ngModelChange",function(r){return c(t.password,r)||(t.password=r),r}),o()(),n(18,"button",11),i(19),o()(),n(20,"p",12),i(21," \xBFNo tienes cuenta? "),n(22,"a",13),i(23,"Reg\xEDstrate"),o()()()()),e&2&&(a(8),s("message",t.errorMessage)("type","error")("show",!!t.errorMessage),a(5),m("ngModel",t.email),s("disabled",t.isLoading),a(4),m("ngModel",t.password),s("disabled",t.isLoading),a(),s("disabled",t.isLoading),a(),M(" ",t.isLoading?"Iniciando sesi\xF3n...":"Entrar"," "))},dependencies:[S,O,w,y,P,x,L,v,C,E],styles:['@charset "UTF-8";.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#1fbf9f,#1f3a5f);padding:1rem}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.2rem;padding:2.5rem;width:100%;max-width:420px;box-shadow:0 20px 50px #1fbf9f40;animation:fadeInUp .6s ease-out}.auth-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#1fbf9f;font-size:2rem;margin-bottom:.5rem;font-weight:700}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#3a3a3a;font-size:1.2rem;margin-bottom:2rem;font-weight:500}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}.logo[_ngcontent-%COMP%]{max-width:120px;height:auto;object-fit:contain}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#3a3a3a;font-weight:600;font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.85rem;border:2px solid #E6E8E7;border-radius:.6rem;font-size:1rem;transition:all .3s ease;box-sizing:border-box;background-color:#f8f9fa}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1fbf9f;background-color:#fff;box-shadow:0 0 0 3px #1fbf9f26}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.9rem;background:linear-gradient(135deg,#1fbf9f,#179e85);color:#fff;border:none;border-radius:.6rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 10px 25px #1fbf9f59}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.auth-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;color:#6b6b6b;font-size:.875rem}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1f3a5f;text-decoration:none;font-weight:600;transition:all .3s ease}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1fbf9f;text-decoration:underline}']})};export{F as Login};
