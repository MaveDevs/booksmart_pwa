import{a as P,b as S,c as v,d as R,e as O,f as E,g as L,h as W,i as x,j as k}from"./chunk-2K6HCOYW.js";import{i as w,j as C}from"./chunk-PKJX3TX3.js";import{$a as m,Ka as s,La as r,Ma as n,Na as M,Qa as y,Xa as i,Ya as _,Za as d,_a as g,a as f,b as h,oa as a,va as c,za as b}from"./chunk-BG3YE536.js";var T=class u{constructor(p,t){this.router=p;this.authService=t}nombre="";apellido="";correo="";password="";confirmPassword="";errorMessage="";successMessage="";isLoading=!1;onRegister(){if(!this.nombre||!this.apellido||!this.correo||!this.password||!this.confirmPassword){this.errorMessage="Por favor completa todos los campos";return}if(this.password!==this.confirmPassword){this.errorMessage="Las contrase\xF1as no coinciden";return}if(this.password.length<8){this.errorMessage="La contrase\xF1a debe tener al menos 8 caracteres";return}this.isLoading=!0,this.errorMessage="",this.successMessage="";let p={nombre:this.nombre,apellido:this.apellido,correo:this.correo,rol_id:1,activo:!0,contrasena:this.password};console.log("\u{1F680} Registrando usuario:",h(f({},p),{contrasena:"***"})),this.authService.register(p).subscribe({next:t=>{console.log("\u2705 Registro exitoso:",t),this.successMessage="Registro exitoso. Redirigiendo al login...",setTimeout(()=>{this.router.navigate(["/login"])},2e3)},error:t=>{console.error("\u274C Error en registro:",t),console.error("\u{1F4CB} Error status:",t.status),console.error("\u{1F4CB} Error body:",t.error);let e="Error al registrar. Por favor intenta de nuevo.";t.error?.detail?typeof t.error.detail=="string"?e=t.error.detail:Array.isArray(t.error.detail)&&(e=t.error.detail.map(l=>l.msg||l).join(", ")):t.error?.message?e=t.error.message:t.status===400&&(e="Datos inv\xE1lidos. Verifica que el correo sea v\xE1lido y que todos los campos est\xE9n completos."),this.errorMessage=e,this.isLoading=!1},complete:()=>{console.log("\u{1F3C1} Observable completado"),this.isLoading=!1}})}static \u0275fac=function(t){return new(t||u)(c(w),c(k))};static \u0275cmp=b({type:u,selectors:[["app-register"]],decls:35,vars:18,consts:[[1,"auth-container"],[1,"auth-card"],[3,"message","type","show"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","placeholder","Tu nombre","required","",3,"ngModelChange","ngModel","disabled"],["for","apellido"],["type","text","id","apellido","name","apellido","placeholder","Tu apellido","required","",3,"ngModelChange","ngModel","disabled"],["for","correo"],["type","email","id","correo","name","correo","placeholder","tu@email.com","required","",3,"ngModelChange","ngModel","disabled"],["for","password"],["type","password","id","password","name","password","placeholder","M\xEDnimo 8 caracteres","required","",3,"ngModelChange","ngModel","disabled"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Repite tu contrase\xF1a","required","",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"btn-primary",3,"disabled"],[1,"auth-link"],["routerLink","/login"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Booksmart"),n(),r(4,"h2"),i(5,"Crear Cuenta"),n(),M(6,"app-alert",2)(7,"app-alert",2),r(8,"form",3),y("ngSubmit",function(){return e.onRegister()}),r(9,"div",4)(10,"label",5),i(11,"Nombre"),n(),r(12,"input",6),m("ngModelChange",function(o){return g(e.nombre,o)||(e.nombre=o),o}),n()(),r(13,"div",4)(14,"label",7),i(15,"Apellido"),n(),r(16,"input",8),m("ngModelChange",function(o){return g(e.apellido,o)||(e.apellido=o),o}),n()(),r(17,"div",4)(18,"label",9),i(19,"Correo Electr\xF3nico"),n(),r(20,"input",10),m("ngModelChange",function(o){return g(e.correo,o)||(e.correo=o),o}),n()(),r(21,"div",4)(22,"label",11),i(23,"Contrase\xF1a"),n(),r(24,"input",12),m("ngModelChange",function(o){return g(e.password,o)||(e.password=o),o}),n()(),r(25,"div",4)(26,"label",13),i(27,"Confirmar Contrase\xF1a"),n(),r(28,"input",14),m("ngModelChange",function(o){return g(e.confirmPassword,o)||(e.confirmPassword=o),o}),n()(),r(29,"button",15),i(30),n()(),r(31,"p",16),i(32," \xBFYa tienes cuenta? "),r(33,"a",17),i(34,"Inicia sesi\xF3n"),n()()()()),t&2&&(a(6),s("message",e.errorMessage)("type","error")("show",!!e.errorMessage),a(),s("message",e.successMessage)("type","success")("show",!!e.successMessage),a(5),d("ngModel",e.nombre),s("disabled",e.isLoading),a(4),d("ngModel",e.apellido),s("disabled",e.isLoading),a(4),d("ngModel",e.correo),s("disabled",e.isLoading),a(4),d("ngModel",e.password),s("disabled",e.isLoading),a(4),d("ngModel",e.confirmPassword),s("disabled",e.isLoading),a(),s("disabled",e.isLoading),a(),_(" ",e.isLoading?"Registrando...":"Registrarse"," "))},dependencies:[W,E,P,S,v,L,O,R,C,x],styles:['@charset "UTF-8";.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#1fbf9f,#1f3a5f);padding:1rem}.auth-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.2rem;padding:2.5rem;width:100%;max-width:420px;box-shadow:0 20px 50px #1fbf9f40;animation:fadeInUp .6s ease-out}.auth-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#1fbf9f;font-size:2rem;margin-bottom:.5rem;font-weight:700}.auth-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#3a3a3a;font-size:1.2rem;margin-bottom:2rem;font-weight:500}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1.5rem}.logo[_ngcontent-%COMP%]{max-width:120px;height:auto;object-fit:contain}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#3a3a3a;font-weight:600;font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.85rem;border:2px solid #E6E8E7;border-radius:.6rem;font-size:1rem;transition:all .3s ease;box-sizing:border-box;background-color:#f8f9fa}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1fbf9f;background-color:#fff;box-shadow:0 0 0 3px #1fbf9f26}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.9rem;background:linear-gradient(135deg,#1fbf9f,#179e85);color:#fff;border:none;border-radius:.6rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 10px 25px #1fbf9f59}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.auth-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;color:#6b6b6b;font-size:.875rem}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1f3a5f;text-decoration:none;font-weight:600;transition:all .3s ease}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1fbf9f;text-decoration:underline}']})};export{T as Register};
